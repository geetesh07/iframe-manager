!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var A=n();for(var t in A)("object"==typeof exports?exports:e)[t]=A[t]}}(window,function(){return function(e){var n={};function A(t){if(n[t])return n[t].exports;var l=n[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,A),l.l=!0,l.exports}return A.m=e,A.c=n,A.d=function(e,n,t){A.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},A.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},A.t=function(e,n){if(1&n&&(e=A(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(A.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)A.d(t,l,function(n){return e[n]}.bind(null,l));return t},A.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return A.d(n,"a",n),n},A.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},A.p="",A(A.s=1)}([function(e,n,A){"use strict";var t,l,o,r,i,c,s=(t="/Users/martinsuba/dev/learn/iframe-manager/source/helpers.ts",l="c7ebdd5fe662fb7c6de4477824136968a570f9cc",o=new(0,function(){}.constructor)("return this")(),i={path:"/Users/martinsuba/dev/learn/iframe-manager/source/helpers.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:5,column:8},end:{line:5,column:85}},2:{start:{line:7,column:4},end:{line:9,column:5}},3:{start:{line:8,column:8},end:{line:8,column:18}},4:{start:{line:10,column:15},end:{line:10,column:124}},5:{start:{line:10,column:60},end:{line:10,column:121}},6:{start:{line:11,column:4},end:{line:11,column:27}},7:{start:{line:13,column:0},end:{line:13,column:32}}},fnMap:{0:{name:"parseStyle",decl:{start:{line:3,column:9},end:{line:3,column:19}},loc:{start:{line:3,column:27},end:{line:12,column:1}},line:3},1:{name:"camelToKebab",decl:{start:{line:4,column:13},end:{line:4,column:25}},loc:{start:{line:4,column:34},end:{line:6,column:5}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:38},end:{line:10,column:39}},loc:{start:{line:10,column:58},end:{line:10,column:123}},line:10}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:7,column:4},end:{line:9,column:5}}],line:7}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0]},inputSourceMap:{version:3,file:"/Users/martinsuba/dev/learn/iframe-manager/source/helpers.ts",sourceRoot:"",sources:["/Users/martinsuba/dev/learn/iframe-manager/source/helpers.ts"],names:[],mappings:";;AAAA,SAAgB,UAAU,CAAC,KAAa;IACtC,SAAS,YAAY,CAAC,MAAc;QAClC,OAAO,MAAM,CAAC,OAAO,CAAC,8BAA8B,EAAE,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;IAC/E,CAAC;IAED,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,EAAE,CAAC;KACX;IAED,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,UAAA,QAAQ,IAAI,OAAG,YAAY,CAAC,QAAQ,CAAC,UAAK,KAAK,CAAC,QAAQ,CAAC,MAAG,EAAhD,CAAgD,CAAC,CAAC;IAClG,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzB,CAAC;AAXD,gCAWC",sourcesContent:["export function parseStyle(style: Object): string {\n  function camelToKebab(string: string): string {\n    return string.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase();\n  }\n\n  if (!style) {\n    return '';\n  }\n\n  const rule = Object.keys(style).map(property => `${camelToKebab(property)}: ${style[property]};`);\n  return rule.join('\\n');\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(c=o[r="__coverage__"]||(o[r]={}))[t]&&c[t].hash===l?c[t]:(i.hash=l,c[t]=i));s.s[0]++,Object.defineProperty(n,"__esModule",{value:!0}),s.s[7]++,n.parseStyle=function(e){if(s.f[0]++,s.s[2]++,!e)return s.b[0][0]++,s.s[3]++,"";s.b[0][1]++;var n=(s.s[4]++,Object.keys(e).map(function(n){return s.f[2]++,s.s[5]++,A=n,s.f[1]++,s.s[1]++,A.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()+": "+e[n]+";";var A}));return s.s[6]++,n.join("\n")}},function(e,n,A){"use strict";var t,l,o,r,i,c,s=(t="/Users/martinsuba/dev/learn/iframe-manager/source/IframeManager.ts",l="dee2d0f72fb174b92238fb505a47d4d8482ca796",o=new(0,function(){}.constructor)("return this")(),i={path:"/Users/martinsuba/dev/learn/iframe-manager/source/IframeManager.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:15},end:{line:3,column:34}},2:{start:{line:4,column:16},end:{line:4,column:36}},3:{start:{line:5,column:35},end:{line:47,column:3}},4:{start:{line:7,column:8},end:{line:7,column:33}},5:{start:{line:9,column:4},end:{line:18,column:6}},6:{start:{line:10,column:21},end:{line:10,column:30}},7:{start:{line:10,column:40},end:{line:10,column:48}},8:{start:{line:10,column:55},end:{line:10,column:68}},9:{start:{line:10,column:83},end:{line:10,column:106}},10:{start:{line:11,column:21},end:{line:11,column:53}},11:{start:{line:12,column:8},end:{line:12,column:43}},12:{start:{line:13,column:8},end:{line:13,column:66}},13:{start:{line:14,column:8},end:{line:16,column:9}},14:{start:{line:15,column:12},end:{line:15,column:56}},15:{start:{line:17,column:8},end:{line:17,column:22}},16:{start:{line:19,column:4},end:{line:21,column:6}},17:{start:{line:20,column:8},end:{line:20,column:36}},18:{start:{line:22,column:4},end:{line:45,column:6}},19:{start:{line:23,column:21},end:{line:23,column:30}},20:{start:{line:23,column:40},end:{line:23,column:48}},21:{start:{line:23,column:63},end:{line:23,column:76}},22:{start:{line:23,column:87},end:{line:23,column:96}},23:{start:{line:24,column:8},end:{line:26,column:9}},24:{start:{line:25,column:12},end:{line:25,column:100}},25:{start:{line:27,column:8},end:{line:29,column:9}},26:{start:{line:28,column:12},end:{line:28,column:99}},27:{start:{line:30,column:8},end:{line:32,column:9}},28:{start:{line:31,column:12},end:{line:31,column:109}},29:{start:{line:33,column:8},end:{line:35,column:9}},30:{start:{line:34,column:12},end:{line:34,column:100}},31:{start:{line:36,column:28},end:{line:36,column:104}},32:{start:{line:37,column:28},end:{line:37,column:83}},33:{start:{line:38,column:8},end:{line:40,column:9}},34:{start:{line:39,column:12},end:{line:39,column:70}},35:{start:{line:41,column:8},end:{line:41,column:49}},36:{start:{line:42,column:21},end:{line:42,column:88}},37:{start:{line:43,column:8},end:{line:43,column:33}},38:{start:{line:44,column:8},end:{line:44,column:22}},39:{start:{line:46,column:4},end:{line:46,column:25}},40:{start:{line:48,column:0},end:{line:48,column:32}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:35},end:{line:5,column:36}},loc:{start:{line:5,column:47},end:{line:47,column:1}},line:5},1:{name:"IframeManager",decl:{start:{line:6,column:13},end:{line:6,column:26}},loc:{start:{line:6,column:29},end:{line:8,column:5}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:9,column:44},end:{line:9,column:45}},loc:{start:{line:9,column:58},end:{line:18,column:5}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:19,column:45},end:{line:19,column:46}},loc:{start:{line:19,column:63},end:{line:21,column:5}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:37},end:{line:22,column:38}},loc:{start:{line:22,column:51},end:{line:45,column:5}},line:22}},branchMap:{0:{loc:{start:{line:10,column:83},end:{line:10,column:106}},type:"cond-expr",locations:[{start:{line:10,column:99},end:{line:10,column:101}},{start:{line:10,column:104},end:{line:10,column:106}}],line:10},1:{loc:{start:{line:24,column:8},end:{line:26,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:26,column:9}},{start:{line:24,column:8},end:{line:26,column:9}}],line:24},2:{loc:{start:{line:24,column:12},end:{line:24,column:49}},type:"binary-expr",locations:[{start:{line:24,column:12},end:{line:24,column:19}},{start:{line:24,column:23},end:{line:24,column:49}}],line:24},3:{loc:{start:{line:27,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:29,column:9}},{start:{line:27,column:8},end:{line:29,column:9}}],line:27},4:{loc:{start:{line:27,column:12},end:{line:27,column:72}},type:"binary-expr",locations:[{start:{line:27,column:12},end:{line:27,column:17}},{start:{line:27,column:22},end:{line:27,column:47}},{start:{line:27,column:51},end:{line:27,column:71}}],line:27},5:{loc:{start:{line:30,column:8},end:{line:32,column:9}},type:"if",locations:[{start:{line:30,column:8},end:{line:32,column:9}},{start:{line:30,column:8},end:{line:32,column:9}}],line:30},6:{loc:{start:{line:30,column:12},end:{line:30,column:85}},type:"binary-expr",locations:[{start:{line:30,column:12},end:{line:30,column:22}},{start:{line:30,column:26},end:{line:30,column:56}},{start:{line:30,column:60},end:{line:30,column:85}}],line:30},7:{loc:{start:{line:33,column:8},end:{line:35,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:35,column:9}},{start:{line:33,column:8},end:{line:35,column:9}}],line:33},8:{loc:{start:{line:33,column:12},end:{line:33,column:48}},type:"binary-expr",locations:[{start:{line:33,column:12},end:{line:33,column:18}},{start:{line:33,column:22},end:{line:33,column:48}}],line:33},9:{loc:{start:{line:37,column:28},end:{line:37,column:83}},type:"cond-expr",locations:[{start:{line:37,column:37},end:{line:37,column:67}},{start:{line:37,column:70},end:{line:37,column:83}}],line:37},10:{loc:{start:{line:38,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:38,column:8},end:{line:40,column:9}},{start:{line:38,column:8},end:{line:40,column:9}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:"/Users/martinsuba/dev/learn/iframe-manager/source/IframeManager.ts",sourceRoot:"",sources:["/Users/martinsuba/dev/learn/iframe-manager/source/IframeManager.ts"],names:[],mappings:";;AAAA,mCAA8B;AAC9B,qCAAuC;AASvC;IAGE;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;IAC3B,CAAC;IAEO,qCAAa,GAArB,UAAsB,EAA2F;YAAzF,kBAAM,EAAE,gBAAK,EAAE,kBAAe,EAAf,oCAAe;QACpD,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACnC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,oBAAU,CAAC,KAAK,CAAC,CAAC,CAAC;QAChD,KAAK,IAAM,IAAI,IAAI,UAAU,EAAE;YAC7B,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;SAC7C;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,sCAAc,GAAd,UAAe,MAAc;QAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC9B,CAAC;IAED,8BAAM,GAAN,UAAO,EAA+C;YAA7C,kBAAM,EAAE,gBAAK,EAAE,0BAAU,EAAE,kBAAM;QACxC,IAAI,CAAC,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;YACzC,MAAM,IAAI,KAAK,CAAC,yDAAuD,OAAO,MAAQ,CAAC,CAAC;SACzF;QACD,IAAI,KAAK,IAAI,CAAC,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;YAChE,MAAM,IAAI,KAAK,CAAC,yDAAuD,OAAO,KAAO,CAAC,CAAC;SACxF;QACD,IAAI,UAAU,IAAI,OAAO,UAAU,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YAC7E,MAAM,IAAI,KAAK,CAAC,8DAA4D,OAAO,UAAY,CAAC,CAAC;SAClG;QACD,IAAI,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;YACxC,MAAM,IAAI,KAAK,CAAC,yDAAuD,OAAO,MAAQ,CAAC,CAAC;SACzF;QAED,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,EAAE,MAAM,QAAA,EAAE,KAAK,OAAA,EAAE,UAAU,YAAA,EAAE,CAAC,CAAC;QACxE,IAAM,aAAa,GAAG,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;QAE9E,IAAI,aAAa,IAAI,IAAI,EAAE;YACzB,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;SAC3D;QAED,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;QACzC,IAAM,MAAM,GAAG,IAAI,gBAAM,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACzE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACzB,OAAO,MAAM,CAAC;IAChB,CAAC;IACH,oBAAC;AAAD,CAAC,AA/CD,IA+CC",sourcesContent:["import Iframe from './Iframe';\nimport { parseStyle } from './helpers';\n\ninterface Settings {\n  source: string;\n  style?: object;\n  attributes?: object;\n  target?: string;\n}\n\nexport default class IframeManager {\n  iframes: Set<Iframe>;\n\n  constructor() {\n    this.iframes = new Set();\n  }\n\n  private createElement({ source, style, attributes = {} }: { source: string, style?: object, attributes?: object }): HTMLElement {\n    const iframe = document.createElement('iframe');\n    iframe.setAttribute('src', source);\n    iframe.setAttribute('style', parseStyle(style));\n    for (const attr in attributes) {\n      iframe.setAttribute(attr, attributes[attr]);\n    }\n    return iframe;\n  }\n\n  deleteFromList(iframe: Iframe) {\n    this.iframes.delete(iframe);\n  }\n\n  inject({ source, style, attributes, target }: Settings) {\n    if (!source || typeof source !== 'string') {\n      throw new Error(`Source property is expected to be a string, but got ${typeof source}`);\n    }\n    if (style && (typeof style !== 'object' || Array.isArray(style))) {\n      throw new Error(`Style property is expected to be an object, but got ${typeof style}`);\n    }\n    if (attributes && typeof attributes !== 'object' || Array.isArray(attributes)) {\n      throw new Error(`Attributes property is expected to be an object, but got ${typeof attributes}`);\n    }\n    if (target && typeof target !== 'string') {\n      throw new Error(`Target property is expected to be a string, but got ${typeof target}`);\n    }\n\n    const iframeElement = this.createElement({ source, style, attributes });\n    const targetElement = target ? document.querySelector(target) : document.body;\n\n    if (targetElement == null) {\n      throw new Error('Cannot find target element in the DOM.');\n    }\n\n    targetElement.appendChild(iframeElement);\n    const iframe = new Iframe(iframeElement, this.deleteFromList.bind(this));\n    this.iframes.add(iframe);\n    return iframe;\n  }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(c=o[r="__coverage__"]||(o[r]={}))[t]&&c[t].hash===l?c[t]:(i.hash=l,c[t]=i));s.s[0]++,Object.defineProperty(n,"__esModule",{value:!0});var a=(s.s[1]++,A(2)),u=(s.s[2]++,A(0)),m=(s.s[3]++,function(){function e(){s.f[1]++,s.s[4]++,this.iframes=new Set}return s.f[0]++,s.s[5]++,e.prototype.createElement=function(e){s.f[2]++;var n=(s.s[6]++,e.source),A=(s.s[7]++,e.style),t=(s.s[8]++,e.attributes),l=(s.s[9]++,void 0===t?(s.b[0][0]++,{}):(s.b[0][1]++,t)),o=(s.s[10]++,document.createElement("iframe"));for(var r in s.s[11]++,o.setAttribute("src",n),s.s[12]++,o.setAttribute("style",u.parseStyle(A)),s.s[13]++,l)s.s[14]++,o.setAttribute(r,l[r]);return s.s[15]++,o},s.s[16]++,e.prototype.deleteFromList=function(e){s.f[3]++,s.s[17]++,this.iframes.delete(e)},s.s[18]++,e.prototype.inject=function(e){s.f[4]++;var n=(s.s[19]++,e.source),A=(s.s[20]++,e.style),t=(s.s[21]++,e.attributes),l=(s.s[22]++,e.target);if(s.s[23]++,s.b[2][0]++,!n||(s.b[2][1]++,"string"!=typeof n))throw s.b[1][0]++,s.s[24]++,new Error("Source property is expected to be a string, but got "+typeof n);if(s.b[1][1]++,s.s[25]++,s.b[4][0]++,A&&(s.b[4][1]++,"object"!=typeof A||(s.b[4][2]++,Array.isArray(A))))throw s.b[3][0]++,s.s[26]++,new Error("Style property is expected to be an object, but got "+typeof A);if(s.b[3][1]++,s.s[27]++,s.b[6][0]++,t&&(s.b[6][1]++,"object"!=typeof t)||(s.b[6][2]++,Array.isArray(t)))throw s.b[5][0]++,s.s[28]++,new Error("Attributes property is expected to be an object, but got "+typeof t);if(s.b[5][1]++,s.s[29]++,s.b[8][0]++,l&&(s.b[8][1]++,"string"!=typeof l))throw s.b[7][0]++,s.s[30]++,new Error("Target property is expected to be a string, but got "+typeof l);s.b[7][1]++;var o=(s.s[31]++,this.createElement({source:n,style:A,attributes:t})),r=(s.s[32]++,l?(s.b[9][0]++,document.querySelector(l)):(s.b[9][1]++,document.body));if(s.s[33]++,null==r)throw s.b[10][0]++,s.s[34]++,new Error("Cannot find target element in the DOM.");s.b[10][1]++,s.s[35]++,r.appendChild(o);var i=(s.s[36]++,new a.default(o,this.deleteFromList.bind(this)));return s.s[37]++,this.iframes.add(i),s.s[38]++,i},s.s[39]++,e}());s.s[40]++,n.default=m},function(e,n,A){"use strict";var t,l,o,r,i,c,s=(t="/Users/martinsuba/dev/learn/iframe-manager/source/Iframe.ts",l="b6048095a38b69be8aecb3ac64e21e8cb059dc5d",o=new(0,function(){}.constructor)("return this")(),i={path:"/Users/martinsuba/dev/learn/iframe-manager/source/Iframe.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:62}},1:{start:{line:3,column:16},end:{line:3,column:36}},2:{start:{line:4,column:28},end:{line:26,column:3}},3:{start:{line:6,column:8},end:{line:6,column:31}},4:{start:{line:7,column:8},end:{line:7,column:45}},5:{start:{line:9,column:4},end:{line:17,column:6}},6:{start:{line:10,column:8},end:{line:12,column:9}},7:{start:{line:11,column:12},end:{line:11,column:90}},8:{start:{line:13,column:8},end:{line:15,column:9}},9:{start:{line:14,column:12},end:{line:14,column:65}},10:{start:{line:16,column:8},end:{line:16,column:72}},11:{start:{line:18,column:4},end:{line:24,column:6}},12:{start:{line:19,column:8},end:{line:21,column:9}},13:{start:{line:20,column:12},end:{line:20,column:65}},14:{start:{line:22,column:8},end:{line:22,column:58}},15:{start:{line:23,column:8},end:{line:23,column:34}},16:{start:{line:25,column:4},end:{line:25,column:18}},17:{start:{line:27,column:0},end:{line:27,column:25}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:28},end:{line:4,column:29}},loc:{start:{line:4,column:40},end:{line:26,column:1}},line:4},1:{name:"Iframe",decl:{start:{line:5,column:13},end:{line:5,column:19}},loc:{start:{line:5,column:45},end:{line:8,column:5}},line:5},2:{name:"(anonymous_2)",decl:{start:{line:9,column:29},end:{line:9,column:30}},loc:{start:{line:9,column:46},end:{line:17,column:5}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:18,column:31},end:{line:18,column:32}},loc:{start:{line:18,column:43},end:{line:24,column:5}},line:18}},branchMap:{0:{loc:{start:{line:10,column:8},end:{line:12,column:9}},type:"if",locations:[{start:{line:10,column:8},end:{line:12,column:9}},{start:{line:10,column:8},end:{line:12,column:9}}],line:10},1:{loc:{start:{line:10,column:12},end:{line:10,column:73}},type:"binary-expr",locations:[{start:{line:10,column:12},end:{line:10,column:18}},{start:{line:10,column:23},end:{line:10,column:48}},{start:{line:10,column:52},end:{line:10,column:72}}],line:10},2:{loc:{start:{line:13,column:8},end:{line:15,column:9}},type:"if",locations:[{start:{line:13,column:8},end:{line:15,column:9}},{start:{line:13,column:8},end:{line:15,column:9}}],line:13},3:{loc:{start:{line:19,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:21,column:9}},{start:{line:19,column:8},end:{line:21,column:9}}],line:19}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:"/Users/martinsuba/dev/learn/iframe-manager/source/Iframe.ts",sourceRoot:"",sources:["/Users/martinsuba/dev/learn/iframe-manager/source/Iframe.ts"],names:[],mappings:";;AAAA,qCAAuC;AAEvC;IAIE,gBAAY,OAAoB,EAAE,cAAwB;QACxD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACvC,CAAC;IAED,sBAAK,GAAL,UAAM,KAAa;QACjB,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;YACjE,MAAM,IAAI,KAAK,CAAC,gDAA8C,OAAO,KAAO,CAAC,CAAC;SAC/E;QACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YACzC,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;SACtD;QAED,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,oBAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IACxD,CAAC;IAED,wBAAO,GAAP;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YACzC,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;SACtD;QAED,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IACH,aAAC;AAAD,CAAC,AA5BD,IA4BC",sourcesContent:["import { parseStyle } from './helpers';\n\nexport default class Iframe {\n  element: HTMLElement;\n  private deleteFromList: Function;\n\n  constructor(element: HTMLElement, deleteFromList: Function) {\n    this.element = element;\n    this.deleteFromList = deleteFromList;\n  }\n\n  style(style: object): void {\n    if (!style && (typeof style !== 'object' || Array.isArray(style))) {\n      throw new Error(`Style is expected to be an object, but got ${typeof style}`);\n    }\n    if (!document.body.contains(this.element)) {\n      throw new Error('Iframe element is not in the dom.');\n    }\n\n    this.element.setAttribute('style', parseStyle(style));\n  }\n\n  destroy(): void {\n    if (!document.body.contains(this.element)) {\n      throw new Error('Iframe element is not in the dom.');\n    }\n\n    this.element.parentNode.removeChild(this.element);\n    this.deleteFromList(this);\n  }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(c=o[r="__coverage__"]||(o[r]={}))[t]&&c[t].hash===l?c[t]:(i.hash=l,c[t]=i));s.s[0]++,Object.defineProperty(n,"__esModule",{value:!0});var a=(s.s[1]++,A(0)),u=(s.s[2]++,function(){function e(e,n){s.f[1]++,s.s[3]++,this.element=e,s.s[4]++,this.deleteFromList=n}return s.f[0]++,s.s[5]++,e.prototype.style=function(e){if(s.f[2]++,s.s[6]++,s.b[1][0]++,!e&&(s.b[1][1]++,"object"!=typeof e||(s.b[1][2]++,Array.isArray(e))))throw s.b[0][0]++,s.s[7]++,new Error("Style is expected to be an object, but got "+typeof e);if(s.b[0][1]++,s.s[8]++,!document.body.contains(this.element))throw s.b[2][0]++,s.s[9]++,new Error("Iframe element is not in the dom.");s.b[2][1]++,s.s[10]++,this.element.setAttribute("style",a.parseStyle(e))},s.s[11]++,e.prototype.destroy=function(){if(s.f[3]++,s.s[12]++,!document.body.contains(this.element))throw s.b[3][0]++,s.s[13]++,new Error("Iframe element is not in the dom.");s.b[3][1]++,s.s[14]++,this.element.parentNode.removeChild(this.element),s.s[15]++,this.deleteFromList(this)},s.s[16]++,e}());s.s[17]++,n.default=u}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL0lmcmFtZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vSWZyYW1lLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicGFyc2VTdHlsZSIsInN0eWxlIiwiY292XzE0eXBhdDNwMW0iLCJmIiwiYiIsInJ1bGUiLCJrZXlzIiwibWFwIiwic3RyaW5nIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwiam9pbiIsIklmcmFtZV8xIiwicmVxdWlyZSIsImhlbHBlcnNfMSIsIklmcmFtZU1hbmFnZXIiLCJjb3ZfMmFtZ29hbjRlOCIsInRoaXMiLCJpZnJhbWVzIiwiU2V0IiwiY3JlYXRlRWxlbWVudCIsIl9hIiwic291cmNlIiwiX2IiLCJhdHRyaWJ1dGVzIiwiaWZyYW1lIiwiZG9jdW1lbnQiLCJhdHRyIiwic2V0QXR0cmlidXRlIiwiZGVsZXRlRnJvbUxpc3QiLCJkZWxldGUiLCJpbmplY3QiLCJ0YXJnZXQiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImlmcmFtZUVsZW1lbnQiLCJ0YXJnZXRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImRlZmF1bHQiLCJhZGQiLCJJZnJhbWUiLCJlbGVtZW50IiwiY292X3g4aW93amhiZSIsImNvbnRhaW5zIiwiZGVzdHJveSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxvQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsU0FDQSxzQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxHQUFBSCxPQUNBLENBQ0EsSUFBQUssRUFBQUwsSUFDQSxRQUFBTSxLQUFBRCxHQUFBLGlCQUFBSixnQkFBQUYsR0FBQU8sR0FBQUQsRUFBQUMsSUFQQSxDQVNDQyxPQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBVCxRQUdBLElBQUFDLEVBQUFNLEVBQUFFLEdBQUEsQ0FDQUosRUFBQUksRUFDQUMsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUYsR0FBQUcsS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQVEsR0FHQVAsRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQVEsRUFBQUssRUFBQUYsRUFHQUgsRUFBQU0sRUFBQVAsRUFHQUMsRUFBQU8sRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVQsRUFBQVUsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFBQWdCLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNULEVBQUFlLEVBQUEsU0FBQXZCLEdBQ0Esb0JBQUF3QixlQUFBQyxhQUNBTixPQUFBQyxlQUFBcEIsRUFBQXdCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFwQixFQUFBLGNBQWlEMEIsT0FBQSxLQVFq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NkI4QixNQUFNQyxRQUFRbEMsS0FDdEQsTUFEK0Q0QyxFQUFBekMsRUFBQSxRQUFBeUMsRUFBQTlDLEVBQUEsS0FDekQsSUFBSWtDLE1BQU0scURBQXVEaEMsR0FFM0UsR0FIQTRDLEVBQUF6QyxFQUFBLFFBRHNDeUMsRUFBQTlDLEVBQUEsTUFJakMyQixTQUFTYSxLQUFLTyxTQUFTN0IsS0FBSzJCLFNBQzdCLE1BRHVDQyxFQUFBekMsRUFBQSxRQUFBeUMsRUFBQTlDLEVBQUEsS0FDakMsSUFBSWtDLE1BQU0scUNBRHBCWSxFQUFBekMsRUFBQSxRQUpzQ3lDLEVBQUE5QyxFQUFBLE1BT3RDa0IsS0FBSzJCLFFBQVFoQixhQUFhLFFBQVNkLEVBQVVkLFdBQVdDLEtBWnhCNEMsRUFBQTlDLEVBQUEsTUFjcEM0QyxFQUFPL0MsVUFBVW1ELFFBQVUsV0FDdkIsR0FEbUNGLEVBQUExQyxFQUFBLEtBQUEwQyxFQUFBOUMsRUFBQSxPQUM5QjJCLFNBQVNhLEtBQUtPLFNBQVM3QixLQUFLMkIsU0FDN0IsTUFEdUNDLEVBQUF6QyxFQUFBLFFBQUF5QyxFQUFBOUMsRUFBQSxNQUNqQyxJQUFJa0MsTUFBTSxxQ0FEcEJZLEVBQUF6QyxFQUFBLFFBRG1DeUMsRUFBQTlDLEVBQUEsTUFJbkNrQixLQUFLMkIsUUFBUUksV0FBV0MsWUFBWWhDLEtBQUsyQixTQUpOQyxFQUFBOUMsRUFBQSxNQUtuQ2tCLEtBQUtZLGVBQWVaLE9BbkJZNEIsRUFBQTlDLEVBQUEsTUFxQjdCNEMsRUFyQmlCLGNBdUI1QnBGLEVBQVFrRixRQUFVRSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gcGFyc2VTdHlsZShzdHlsZSkge1xuICAgIGZ1bmN0aW9uIGNhbWVsVG9LZWJhYihzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW2EtejAtOV18KD89W0EtWl0pKShbQS1aXSkvZywgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgaWYgKCFzdHlsZSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHZhciBydWxlID0gT2JqZWN0LmtleXMoc3R5bGUpLm1hcChmdW5jdGlvbiAocHJvcGVydHkpIHsgcmV0dXJuIGNhbWVsVG9LZWJhYihwcm9wZXJ0eSkgKyBcIjogXCIgKyBzdHlsZVtwcm9wZXJ0eV0gKyBcIjtcIjsgfSk7XG4gICAgcmV0dXJuIHJ1bGUuam9pbignXFxuJyk7XG59XG5leHBvcnRzLnBhcnNlU3R5bGUgPSBwYXJzZVN0eWxlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgSWZyYW1lXzEgPSByZXF1aXJlKFwiLi9JZnJhbWVcIik7XG52YXIgaGVscGVyc18xID0gcmVxdWlyZShcIi4vaGVscGVyc1wiKTtcbnZhciBJZnJhbWVNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIElmcmFtZU1hbmFnZXIoKSB7XG4gICAgICAgIHRoaXMuaWZyYW1lcyA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgSWZyYW1lTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgc291cmNlID0gX2Euc291cmNlLCBzdHlsZSA9IF9hLnN0eWxlLCBfYiA9IF9hLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYjtcbiAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzb3VyY2UpO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGhlbHBlcnNfMS5wYXJzZVN0eWxlKHN0eWxlKSk7XG4gICAgICAgIGZvciAodmFyIGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyaWJ1dGVzW2F0dHJdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWZyYW1lO1xuICAgIH07XG4gICAgSWZyYW1lTWFuYWdlci5wcm90b3R5cGUuZGVsZXRlRnJvbUxpc3QgPSBmdW5jdGlvbiAoaWZyYW1lKSB7XG4gICAgICAgIHRoaXMuaWZyYW1lcy5kZWxldGUoaWZyYW1lKTtcbiAgICB9O1xuICAgIElmcmFtZU1hbmFnZXIucHJvdG90eXBlLmluamVjdCA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgc291cmNlID0gX2Euc291cmNlLCBzdHlsZSA9IF9hLnN0eWxlLCBhdHRyaWJ1dGVzID0gX2EuYXR0cmlidXRlcywgdGFyZ2V0ID0gX2EudGFyZ2V0O1xuICAgICAgICBpZiAoIXNvdXJjZSB8fCB0eXBlb2Ygc291cmNlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU291cmNlIHByb3BlcnR5IGlzIGV4cGVjdGVkIHRvIGJlIGEgc3RyaW5nLCBidXQgZ290IFwiICsgdHlwZW9mIHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlICYmICh0eXBlb2Ygc3R5bGUgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoc3R5bGUpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3R5bGUgcHJvcGVydHkgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgZ290IFwiICsgdHlwZW9mIHN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiB0eXBlb2YgYXR0cmlidXRlcyAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShhdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0cmlidXRlcyBwcm9wZXJ0eSBpcyBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGJ1dCBnb3QgXCIgKyB0eXBlb2YgYXR0cmlidXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldCAmJiB0eXBlb2YgdGFyZ2V0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGFyZ2V0IHByb3BlcnR5IGlzIGV4cGVjdGVkIHRvIGJlIGEgc3RyaW5nLCBidXQgZ290IFwiICsgdHlwZW9mIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlmcmFtZUVsZW1lbnQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoeyBzb3VyY2U6IHNvdXJjZSwgc3R5bGU6IHN0eWxlLCBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzIH0pO1xuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IHRhcmdldCA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIGlmICh0YXJnZXRFbGVtZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgdGFyZ2V0IGVsZW1lbnQgaW4gdGhlIERPTS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKGlmcmFtZUVsZW1lbnQpO1xuICAgICAgICB2YXIgaWZyYW1lID0gbmV3IElmcmFtZV8xLmRlZmF1bHQoaWZyYW1lRWxlbWVudCwgdGhpcy5kZWxldGVGcm9tTGlzdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5pZnJhbWVzLmFkZChpZnJhbWUpO1xuICAgICAgICByZXR1cm4gaWZyYW1lO1xuICAgIH07XG4gICAgcmV0dXJuIElmcmFtZU1hbmFnZXI7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gSWZyYW1lTWFuYWdlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGhlbHBlcnNfMSA9IHJlcXVpcmUoXCIuL2hlbHBlcnNcIik7XG52YXIgSWZyYW1lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIElmcmFtZShlbGVtZW50LCBkZWxldGVGcm9tTGlzdCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmRlbGV0ZUZyb21MaXN0ID0gZGVsZXRlRnJvbUxpc3Q7XG4gICAgfVxuICAgIElmcmFtZS5wcm90b3R5cGUuc3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgICAgaWYgKCFzdHlsZSAmJiAodHlwZW9mIHN0eWxlICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHN0eWxlKSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0eWxlIGlzIGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgYnV0IGdvdCBcIiArIHR5cGVvZiBzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSWZyYW1lIGVsZW1lbnQgaXMgbm90IGluIHRoZSBkb20uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBoZWxwZXJzXzEucGFyc2VTdHlsZShzdHlsZSkpO1xuICAgIH07XG4gICAgSWZyYW1lLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJZnJhbWUgZWxlbWVudCBpcyBub3QgaW4gdGhlIGRvbS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmRlbGV0ZUZyb21MaXN0KHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIElmcmFtZTtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBJZnJhbWU7XG4iXSwic291cmNlUm9vdCI6IiJ9